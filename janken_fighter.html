<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/sample.css" />
    <title>JANKEN FIGHTER II</title>
  </head>

  <body>
    <!-- タイトル -->
    <header>
      <h1>JANKEN FIGHTER II</h1>
    </header>

    <!-- 画像 -->
    <main>
      <img src="img/ryu_ken.jpg" alt="" />

      <div class="ryu_ken_window">
        <!-- 必殺技リスト -->
        <div class="move_list">
          <p>あなたのわざをえらぶ▼</p>
          <ul>
            <li id="gu_btn">✊はどうけん</li>
            <li id="cho_btn">✌️しょうりゅうけん</li>
            <li id="par_btn">✋たつまきせんぷうきゃく</li>
          </ul>
        </div>

        <!-- 相手の技表示 -->
        <div class="ken_move">
          <div>あいてのわざは ．．．．．</div>
          <div id="com_hand"></div>
        </div>
      </div>

      <!-- メッセージウィンドウ -->
      <div id="result">ダメージは ・・・</div>

      <!-- 音声 -->
      <audio src="audio/hadoken.mp3" id="hadoken" preload="auto"></audio>
      <audio src="audio/shoryuken.mp3" id="shoryuken" preload="auto"></audio>
      <audio
        src="audio/tatsumaki_senpukyaku.mp3"
        id="tatsumaki_senpukyaku"
        preload="auto"
      ></audio>
    </main>

    <footer></footer>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>
      // 自分と相手の体力値
      let player_HP = 100;
      let com_HP = 100;

      // 相手の体力を０以下にしたら勝ち
      // うわーうわーうわー
      // you win　音声
      // しょうりゅうけん　を　やぶらぬかぎり　おまえに　かちめはない！！

      // 自分の体力が０以下になったら負け
      // うわーうわーうわー
      // you lose　音声
      // くにへ　かえるんだな。おまえに　かぞくがいるだろう・・・

      // 波動拳を選んだ時の音声
      $("#gu_btn").on("click", function sound() {
        $("#hadoken").get(0).currentTime = 0;
        $("#hadoken").get(0).play();
      });

      // 波動拳を選んだ時の相手の技の決定
      $("#gu_btn").on("click", function () {
        // setTimeout_クリックしてから２秒後に実行
        setTimeout(function () {
          // ０〜２の乱数作成
          const randomNumber = Math.floor(Math.random() * 3);
          // 相手の手が決まり、音声が流れてダメージが表示される
          if (randomNumber == 0) {
            $("#com_hand").text("✊はどうけん");
            $("#result").text("うちけしとなり、りょうしゃにダメージなし");
            $(function sound() {
              $("#hadoken").get(0).currentTime = 0;
              $("#hadoken").get(0).play();
            });
          } else if (randomNumber == 1) {
            $("#com_hand").text("✌️しょうりゅうけん");
            $("#result").text("あいてに３０のダメージ");
            com_HP -= 30;
            $(function sound() {
              $("#shoryuken").get(0).currentTime = 0;
              $("#shoryuken").get(0).play();
            });
          } else if (randomNumber == 2) {
            $("#com_hand").text("✋たつまきせんぷうきゃく");
            $("#result").text("あなたに３０のダメージ");
            player_HP -= 30;
            $(function sound() {
              $("#tatsumaki_senpukyaku").get(0).currentTime = 0;
              $("#tatsumaki_senpukyaku").get(0).play();
            });
          } else {
            alert("エラー");
          }
          console.log(player_HP);
          console.log(com_HP);
        }, 2000);
      });

      // 昇竜拳を選んだ時の音声
      $("#cho_btn").on("click", function sound() {
        $("#shoryuken").get(0).currentTime = 0;
        $("#shoryuken").get(0).play();
      });

      // 昇竜拳を選んだ時の相手の技の決定
      $("#cho_btn").on("click", function () {
        // setTimeout_クリックしてから２秒後に実行
        setTimeout(function () {
          // ０〜２の乱数作成
          const randomNumber = Math.floor(Math.random() * 3);
          // 相手の手が決まり、音声が流れてダメージが表示される
          if (randomNumber == 0) {
            $("#com_hand").text("✊はどうけん");
            $("#result").text("あなたに３０のダメージ");
            player_HP -= 30;
            $(function sound() {
              $("#hadoken").get(0).currentTime = 0;
              $("#hadoken").get(0).play();
            });
          } else if (randomNumber == 1) {
            $("#com_hand").text("✌️しょうりゅうけん");
            $("#result").text("あいうちとなり、りょうしゃに１０のダメージ");
            player_HP -= 10;
            com_HP -= 10;
            $(function sound() {
              $("#shoryuken").get(0).currentTime = 0;
              $("#shoryuken").get(0).play();
            });
          } else if (randomNumber == 2) {
            $("#com_hand").text("✋たつまきせんぷうきゃく");
            $("#result").text("あいてに３０のダメージ");
            com_HP -= 30;
            $(function sound() {
              $("#tatsumaki_senpukyaku").get(0).currentTime = 0;
              $("#tatsumaki_senpukyaku").get(0).play();
            });
          } else {
            alert("エラー");
          }
          console.log(player_HP);
          console.log(com_HP);
        }, 2000);
      });

      // 竜巻旋風脚を選んだ時の音声
      $("#par_btn").on("click", function sound() {
        $("#tatsumaki_senpukyaku").get(0).currentTime = 0;
        $("#tatsumaki_senpukyaku").get(0).play();
      });

      // 竜巻旋風脚を選んだ時の相手の技の決定
      $("#par_btn").on("click", function () {
        // setTimeout_クリックしてから２秒後に実行
        setTimeout(function () {
          // ０〜２の乱数作成
          const randomNumber = Math.floor(Math.random() * 3);
          // 相手の手が決まり、音声が流れてダメージが表示される
          if (randomNumber == 0) {
            $("#com_hand").text("✊はどうけん");
            $("#result").text("あいてに３０のダメージ");
            com_HP -= 30;
            $(function sound() {
              $("#hadoken").get(0).currentTime = 0;
              $("#hadoken").get(0).play();
            });
          } else if (randomNumber == 1) {
            $("#com_hand").text("✌️しょうりゅうけん");
            $("#result").text("あなたに３０のダメージ");
            player_HP -= 30;
            $(function sound() {
              $("#shoryuken").get(0).currentTime = 0;
              $("#shoryuken").get(0).play();
            });
          } else if (randomNumber == 2) {
            $("#com_hand").text("✋たつまきせんぷうきゃく");
            $("#result").text("あいうちとなり、りょうしゃに１０のダメージ");
            player_HP -= 10;
            com_HP -= 10;
            $(function sound() {
              $("#tatsumaki_senpukyaku").get(0).currentTime = 0;
              $("#tatsumaki_senpukyaku").get(0).play();
            });
          } else {
            alert("エラー");
          }
          console.log(player_HP);
          console.log(com_HP);
        }, 2000);
      });
    </script>
  </body>
</html>
